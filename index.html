<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>File Tree & Bundle Generator</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>

<div class="container">
    <button id="theme-toggle" class="theme-btn" onclick="toggleTheme()" title="–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ç–µ–º—É">
        <i class="fa-solid fa-sun"></i>
    </button>

    <header>
        <h1>üå≤ File Tree Generator</h1>
        <p>GitHub / Local &rarr; Visual Tree & Bundle</p>
    </header>

    <!-- 1. –°–ï–ö–¶–ò–Ø –í–í–û–î–ê -->
    <div class="card input-section">
        <div class="tabs">
            <button class="tab-btn active" onclick="switchTab('github')"><i class="fab fa-github"></i> GitHub Repo</button>
            <button class="tab-btn" onclick="switchTab('local')"><i class="fa-regular fa-folder-open"></i> –õ–æ–∫–∞–ª—å–Ω–∞—è –ø–∞–ø–∫–∞</button>
        </div>

        <div id="github-panel" class="panel active">
            <div class="input-group">
                <input type="text" id="repoUrl" placeholder="https://github.com/username/repo">
                <input type="password" id="repoToken" placeholder="Token (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)">
            </div>
            <small>
                –¢–æ–∫–µ–Ω –Ω—É–∂–µ–Ω –¥–ª—è –ø—Ä–∏–≤–∞—Ç–Ω—ã—Ö —Ä–µ–ø–æ –∏ —É–≤–µ–ª–∏—á–µ–Ω–∏—è –ª–∏–º–∏—Ç–æ–≤ API.
                <a href="https://github.com/settings/tokens" target="_blank" style="color: var(--text); text-decoration: underline;">–ü–æ–ª—É—á–∏—Ç—å —Ç–æ–∫–µ–Ω (Generate New Token)</a>
            </small>
            <button class="action-btn" onclick="fetchGitHubRepo()">üì• –ó–∞–≥—Ä—É–∑–∏—Ç—å —Å–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤</button>
        </div>

        <div id="local-panel" class="panel">
            <div class="upload-box">
                <input type="file" id="folderInput" webkitdirectory directory multiple>
                <div class="upload-label">
                    <i class="fa-solid fa-cloud-arrow-up"></i>
                    <span>–ù–∞–∂–º–∏—Ç–µ, —á—Ç–æ–±—ã –≤—ã–±—Ä–∞—Ç—å –ø–∞–ø–∫—É</span>
                </div>
            </div>
        </div>
    </div>

    <!-- 2. –°–ï–ö–¶–ò–Ø –í–´–ë–û–†–ê –ò –î–ï–ô–°–¢–í–ò–ô (–û–ë–ù–û–í–õ–ï–ù–û) -->
    <div id="selection-section" class="card hidden">
        <div class="section-header">
            <h2>üìÇ –í—ã–±–µ—Ä–∏—Ç–µ —Ñ–∞–π–ª—ã <span id="file-counter" class="counter-badge">0</span></h2>
            <div class="global-actions">
                <button onclick="toggleAll(true)" class="small-btn">–í—Å–µ</button>
                <button onclick="toggleAll(false)" class="small-btn">–ù–∏—á–µ–≥–æ</button>
            </div>
        </div>

        <div id="extension-container" class="extension-bar hidden">
            <span class="filter-label">–¢–∏–ø—ã:</span>
            <div id="extension-list" class="tags-wrapper"></div>
        </div>

        <div id="file-list" class="file-list-container"></div>

        <!-- –ö–ù–û–ü–ö–ê –ü–û–ö–ê–ó–ê –î–ï–†–ï–í–ê -->
        <button class="secondary-btn full-width-btn" style="margin-top: 15px;" onclick="generateTree()">
            <i class="fa-solid fa-eye"></i> –ü–æ–∫–∞–∑–∞—Ç—å –≤–∏–∑—É–∞–ª—å–Ω–æ–µ –¥–µ—Ä–µ–≤–æ
        </button>

        <div class="divider"></div>

        <!-- –°–¢–ê–¢–ò–°–¢–ò–ö–ê –ò –°–ö–ê–ß–ò–í–ê–ù–ò–ï (–¢–ï–ü–ï–†–¨ –¢–£–¢) -->
        <div class="stats-panel">
            <div class="stats-info">
                <div class="stat-item">
                    <span class="stat-label">–í—Å–µ–≥–æ —Å—Ç—Ä–æ–∫</span>
                    <span id="stat-total-lines" class="stat-value">0</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">–ö–æ–¥ (–±–µ–∑ –ø—É—Å—Ç—ã—Ö)</span>
                    <span id="stat-code-lines" class="stat-value">0</span>
                </div>
            </div>
            <div class="stats-actions">
                <button class="secondary-btn" onclick="processFiles('stats')">
                    <i class="fa-solid fa-calculator"></i> –ü–µ—Ä–µ—Å—á–∏—Ç–∞—Ç—å
                </button>
            </div>
        </div>

        <button class="primary-btn download-btn" onclick="processFiles('download')">
            <i class="fa-solid fa-file-arrow-down"></i> –°–∫–∞—á–∞—Ç—å –≤—Å—ë –≤ –æ–¥–∏–Ω —Ñ–∞–π–ª (.txt)
        </button>

        <div id="loading-status" class="status-bar hidden">
            <i class="fa-solid fa-spinner fa-spin"></i>
            <span id="loading-text">–û–±—Ä–∞–±–æ—Ç–∫–∞...</span>
        </div>
    </div>

    <!-- 3. –°–ï–ö–¶–ò–Ø –†–ï–ó–£–õ–¨–¢–ê–¢–ê (–¢–û–õ–¨–ö–û –í–ò–ó–£–ê–õ) -->
    <div id="result-section" class="card hidden">
        <div class="section-header">
            <h2>–†–µ–∑—É–ª—å—Ç–∞—Ç</h2>
            <div class="result-controls">
                <select id="view-mode" onchange="renderCurrentView()" class="mode-select">
                    <option value="vertical">Vertical (Classic)</option>
                    <option value="ascii">ASCII (Readme.md)</option>
                </select>
                <button onclick="copyToClipboard()" class="small-btn"><i class="fa-regular fa-copy"></i> Copy</button>
            </div>
        </div>
        <div id="tree-output-container" class="output-container"></div>
    </div>
</div>

<script src="script.js"></script>
</body>
</html>